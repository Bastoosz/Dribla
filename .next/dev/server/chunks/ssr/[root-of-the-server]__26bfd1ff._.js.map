{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows%2011/Desktop/Dribla/dribla_frontend/lib/supabaseClient.ts"],"sourcesContent":["// lib/supabaseClient.ts\r\n\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\n// Variáveis de ambiente devem ser configuradas no Vercel e no .env.local\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\n// Verifica se as chaves existem antes de criar o cliente\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  // Lançar um erro claro para o ambiente de desenvolvimento/compilação\r\n  throw new Error(\"As variáveis de ambiente NEXT_PUBLIC_SUPABASE_URL e NEXT_PUBLIC_SUPABASE_ANON_KEY devem estar definidas.\");\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;AAExB;;AAEA,yEAAyE;AACzE,MAAM;AACN,MAAM;AAEN,yDAAyD;AACzD;;AAKO,MAAM,WAAW,IAAA,iKAAY,EAAC,aAAa","debugId":null}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows%2011/Desktop/Dribla/dribla_frontend/components/Layout.tsx"],"sourcesContent":["// components/Layout.tsx\r\n\r\nimport React, { ReactNode } from 'react';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/router'; // Para destacar o link ativo\r\nimport { Home, Users, CreditCard, User, LogOut } from 'lucide-react'; // Ícones\r\nimport { supabase } from '../lib/supabaseClient'; // Para o botão de logout\r\n\r\ninterface LayoutProps {\r\n  children: ReactNode;\r\n  title: string; // Título da página atual a ser exibido no cabeçalho\r\n}\r\n\r\nconst Layout: React.FC<LayoutProps> = ({ children, title }) => {\r\n  const router = useRouter();\r\n\r\n  // Função para fazer logout\r\n  const handleLogout = async () => {\r\n    const { error } = await supabase.auth.signOut();\r\n    if (!error) {\r\n      router.push('/login'); // Redireciona para login após logout\r\n    } else {\r\n      console.error(\"Erro ao fazer logout:\", error);\r\n      // Adicionar feedback visual de erro aqui, se necessário (ex: toast)\r\n    }\r\n  };\r\n\r\n  // Itens da navegação da Sidebar\r\n  const navItems = [\r\n    { href: '/home-acao', label: 'Dashboard', icon: Home },\r\n    { href: '/elenco', label: 'Elenco', icon: Users },\r\n    { href: '/financeiro', label: 'Financeiro', icon: CreditCard }, // <-- LINK ADICIONADO\r\n    // { href: '/configuracoes', label: 'Configurações', icon: Settings }, // Exemplo para futuras páginas\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex bg-dribla-graphite text-dribla-light\">\r\n      {/* Sidebar Fixa */}\r\n      <aside className=\"w-64 bg-gray-900 p-4 flex flex-col justify-between border-r border-gray-800 shadow-lg\">\r\n        {/* Parte Superior: Logo e Navegação Principal */}\r\n        <div>\r\n          <div className=\"mb-8 text-center pt-2\">\r\n            {/* Logo Clicável */}\r\n             <Link href=\"/home-acao\" className=\"text-3xl font-bold text-dribla-green tracking-wider inline-block\">\r\n               DRIBLA\r\n             </Link>\r\n          </div>\r\n          {/* Menu de Navegação */}\r\n          <nav className=\"space-y-2\">\r\n            {navItems.map((item) => {\r\n              const isActive = router.pathname === item.href;\r\n              return (\r\n                <Link\r\n                  key={item.href}\r\n                  href={item.href}\r\n                  // Estilos do link, incluindo o estado ativo\r\n                  className={`flex items-center px-4 py-2.5 rounded-lg transition duration-200 ease-in-out group ${\r\n                    isActive\r\n                      ? 'bg-dribla-green text-gray-900 font-semibold shadow-md' // Estilo Ativo\r\n                      : 'text-gray-400 hover:bg-gray-800 hover:text-white' // Estilo Inativo/Hover\r\n                  }`}\r\n                >\r\n                  <item.icon className={`w-5 h-5 mr-3 transition duration-200 ${isActive ? 'text-gray-900' : 'text-gray-500 group-hover:text-white'}`} />\r\n                  {item.label}\r\n                </Link>\r\n              );\r\n            })}\r\n          </nav>\r\n        </div>\r\n\r\n        {/* Parte Inferior: Perfil (Futuro) e Logout */}\r\n        <div className=\"border-t border-gray-700 pt-4 mt-4 space-y-2\">\r\n           {/* Link para Perfil (Ainda não criado) - Descomentar quando a página existir */}\r\n           {/* <Link href=\"/perfil\" className={`flex items-center px-4 py-2.5 rounded-lg transition duration-200 ${ router.pathname === '/perfil' ? 'bg-gray-700 text-white' : 'text-gray-400 hover:bg-gray-800 hover:text-white'}`}>\r\n             <User className=\"w-5 h-5 mr-3\" /> Perfil\r\n           </Link> */}\r\n           {/* Botão de Logout */}\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"w-full flex items-center px-4 py-2.5 rounded-lg text-gray-400 hover:bg-red-800/50 hover:text-red-300 transition duration-200 group\"\r\n          >\r\n            <LogOut className=\"w-5 h-5 mr-3 text-gray-500 group-hover:text-red-300 transition duration-200\" />\r\n            Sair\r\n          </button>\r\n        </div>\r\n      </aside>\r\n\r\n      {/* Conteúdo Principal Flexível */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n         {/* Cabeçalho Superior Fixo (Opcional, mas útil) */}\r\n         <header className=\"bg-gray-850 p-4 border-b border-gray-700 shadow-sm sticky top-0 z-10 flex items-center h-16\">\r\n            {/* Título da Página Atual */}\r\n            <h1 className=\"text-xl font-semibold text-white\">{title}</h1>\r\n            {/* Pode adicionar outras informações aqui, como nome do usuário */}\r\n         </header>\r\n\r\n         {/* Área de Conteúdo com Scroll */}\r\n         <main className=\"flex-1 p-6 md:p-10 overflow-y-auto bg-dribla-graphite\">\r\n            {children}\r\n         </main>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n\r\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;;AAGxB;AACA,mNAAyC,6BAA6B;AACtE,qUAAsE,SAAS;AAA/E;AAAA;AAAA;AACA,oMAAkD,yBAAyB;;;;;;AAO3E,MAAM,SAAgC,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE;IACxD,MAAM,SAAS,IAAA,oIAAS;IAExB,2BAA2B;IAC3B,MAAM,eAAe;QACnB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,0HAAQ,CAAC,IAAI,CAAC,OAAO;QAC7C,IAAI,CAAC,OAAO;YACV,OAAO,IAAI,CAAC,WAAW,qCAAqC;QAC9D,OAAO;YACL,QAAQ,KAAK,CAAC,yBAAyB;QACvC,oEAAoE;QACtE;IACF;IAEA,gCAAgC;IAChC,MAAM,WAAW;QACf;YAAE,MAAM;YAAc,OAAO;YAAa,MAAM,mMAAI;QAAC;QACrD;YAAE,MAAM;YAAW,OAAO;YAAU,MAAM,sMAAK;QAAC;QAChD;YAAE,MAAM;YAAe,OAAO;YAAc,MAAM,yNAAU;QAAC;KAE9D;IAED,qBACE,qKAAC;QAAI,WAAU;;0BAEb,qKAAC;gBAAM,WAAU;;kCAEf,qKAAC;;0CACC,qKAAC;gCAAI,WAAU;0CAEZ,cAAA,qKAAC,gIAAI;oCAAC,MAAK;oCAAa,WAAU;8CAAmE;;;;;;;;;;;0CAKxG,qKAAC;gCAAI,WAAU;0CACZ,SAAS,GAAG,CAAC,CAAC;oCACb,MAAM,WAAW,OAAO,QAAQ,KAAK,KAAK,IAAI;oCAC9C,qBACE,qKAAC,gIAAI;wCAEH,MAAM,KAAK,IAAI;wCACf,4CAA4C;wCAC5C,WAAW,CAAC,mFAAmF,EAC7F,WACI,wDAAwD,eAAe;2CACvE,mDAAmD,uBAAuB;0CAC9E;;0DAEF,qKAAC,KAAK,IAAI;gDAAC,WAAW,CAAC,qCAAqC,EAAE,WAAW,kBAAkB,wCAAwC;;;;;;4CAClI,KAAK,KAAK;;uCAVN,KAAK,IAAI;;;;;gCAapB;;;;;;;;;;;;kCAKJ,qKAAC;wBAAI,WAAU;kCAMb,cAAA,qKAAC;4BACC,SAAS;4BACT,WAAU;;8CAEV,qKAAC,6MAAM;oCAAC,WAAU;;;;;;gCAAgF;;;;;;;;;;;;;;;;;;0BAOxG,qKAAC;gBAAI,WAAU;;kCAEZ,qKAAC;wBAAO,WAAU;kCAEf,cAAA,qKAAC;4BAAG,WAAU;sCAAoC;;;;;;;;;;;kCAKrD,qKAAC;wBAAK,WAAU;kCACZ;;;;;;;;;;;;;;;;;;AAMb;uCAEe","debugId":null}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows%2011/Desktop/Dribla/dribla_frontend/pages/financeiro.tsx"],"sourcesContent":["// pages/financeiro.tsx\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport Head from 'next/head';\r\nimport Layout from '../components/Layout';\r\nimport { supabase } from '../lib/supabaseClient';\r\nimport { useRouter } from 'next/router';\r\nimport Link from 'next/link';\r\nimport { Loader2, CreditCard, Users, AlertTriangle } from 'lucide-react';\r\n\r\n// Tipagem para os dados do Treinador\r\ninterface TreinadorInfo {\r\n  planoAtual: 'free' | 'vip' | 'premium';\r\n  limiteAlunos: number;\r\n  totalAlunos: number; // Adicionamos a contagem atual\r\n}\r\n\r\nconst FinanceiroPage: React.FC = () => {\r\n  const router = useRouter();\r\n  const [data, setData] = useState<TreinadorInfo | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchFinanceiroData = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        router.push('/login');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // Buscar dados do treinador e contagem de alunos em paralelo\r\n        const [treinadorPromise, alunosCountPromise] = await Promise.all([\r\n          supabase\r\n            .from('treinadores')\r\n            .select('plano_atual, limite_alunos')\r\n            .eq('id', user.id)\r\n            .single(),\r\n          supabase\r\n            .from('alunos')\r\n            .select('*', { count: 'exact', head: true })\r\n            .eq('id_treinador', user.id)\r\n        ]);\r\n\r\n        if (treinadorPromise.error) throw new Error(\"Erro ao buscar dados da assinatura.\");\r\n        if (alunosCountPromise.error) throw new Error(\"Erro ao contar alunos.\");\r\n\r\n        setData({\r\n          planoAtual: treinadorPromise.data.plano_atual,\r\n          limiteAlunos: treinadorPromise.data.limite_alunos,\r\n          totalAlunos: alunosCountPromise.count ?? 0,\r\n        });\r\n\r\n      } catch (err: any) {\r\n        console.error(\"Erro na página Financeiro:\", err.message);\r\n        setError(\"Não foi possível carregar as informações financeiras.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchFinanceiroData();\r\n  }, [router]);\r\n\r\n  // Função auxiliar para exibir nome amigável do plano\r\n  const getPlanoNome = (plano: 'free' | 'vip' | 'premium'): string => {\r\n    switch (plano) {\r\n      case 'free': return 'Plano Free';\r\n      case 'vip': return 'Plano VIP';\r\n      case 'premium': return 'Plano Premium';\r\n      default: return 'Desconhecido';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>Dribla | Financeiro</title>\r\n      </Head>\r\n      <Layout title=\"Financeiro e Assinatura\">\r\n\r\n        {loading && (\r\n          <div className=\"flex justify-center items-center py-20\">\r\n            <Loader2 className=\"w-12 h-12 text-dribla-green animate-spin\" />\r\n          </div>\r\n        )}\r\n\r\n        {error && (\r\n          <div className=\"p-4 mb-6 bg-red-900/50 text-red-400 rounded-lg border border-red-700 text-center\">\r\n            <AlertTriangle className=\"inline w-5 h-5 mr-2\" /> {error}\r\n          </div>\r\n        )}\r\n\r\n        {!loading && data && (\r\n          <div className=\"max-w-3xl mx-auto\">\r\n            <h1 className=\"text-3xl font-bold mb-8 text-white\">Sua Assinatura Dribla</h1>\r\n\r\n            <div className=\"bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-700 space-y-6\">\r\n              {/* Informações do Plano Atual */}\r\n              <div>\r\n                <h2 className=\"text-xl font-semibold text-dribla-green mb-3 flex items-center\">\r\n                  <CreditCard className=\"w-5 h-5 mr-2\" /> Plano Atual\r\n                </h2>\r\n                <p className=\"text-4xl font-bold text-white mb-1\">{getPlanoNome(data.planoAtual)}</p>\r\n                {data.planoAtual !== 'free' && (\r\n                   <p className=\"text-sm text-gray-400\">Renovação automática ativa.</p>\r\n                   // Futuramente: Adicionar data da próxima cobrança\r\n                )}\r\n              </div>\r\n\r\n              {/* Limites e Uso */}\r\n              <div className=\"border-t border-gray-700 pt-6\">\r\n                 <h2 className=\"text-xl font-semibold text-dribla-green mb-3 flex items-center\">\r\n                   <Users className=\"w-5 h-5 mr-2\" /> Limites e Uso\r\n                 </h2>\r\n                 <div className=\"flex items-baseline space-x-2\">\r\n                    <p className=\"text-3xl font-bold text-white\">{data.totalAlunos}</p>\r\n                    <p className=\"text-gray-400\">/ {data.limiteAlunos === 99999 ? 'Ilimitado' : data.limiteAlunos} Alunos</p>\r\n                 </div>\r\n                 {/* Barra de Progresso (Opcional) */}\r\n                 {data.limiteAlunos !== 99999 && (\r\n                    <div className=\"w-full bg-gray-700 rounded-full h-2.5 mt-3\">\r\n                        <div\r\n                            className=\"bg-dribla-green h-2.5 rounded-full\"\r\n                            style={{ width: `${(data.totalAlunos / data.limiteAlunos) * 100}%` }}\r\n                        ></div>\r\n                    </div>\r\n                 )}\r\n              </div>\r\n\r\n               {/* Ações */}\r\n               <div className=\"border-t border-gray-700 pt-6 flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-4\">\r\n                 {/* === CORREÇÃO AQUI === */}\r\n                 <Link href=\"/planos\">\r\n                   <button className=\"w-full sm:w-auto px-6 py-2 bg-dribla-green text-gray-900 font-semibold rounded-lg hover:bg-green-600 transition duration-200 shadow-md\">\r\n                     Alterar Plano\r\n                   </button>\r\n                 </Link>\r\n                 {/* Futuramente: Botão para Gerenciar Pagamento (Stripe/MP Portal) */}\r\n                 {/* <button className=\"w-full sm:w-auto px-6 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-500 transition duration-200\">\r\n                     Gerenciar Pagamento\r\n                 </button> */}\r\n               </div>\r\n\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n      </Layout>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FinanceiroPage;\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}